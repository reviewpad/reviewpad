# Copyright 2022 Explore.dev Unipessoal Lda. All Rights Reserved.
# Use of this source code is governed by a license that can be
# found in the LICENSE file.

api-version: reviewpad.com/v1alpha

labels:
  small:
    description: Small changes
    color: "294b69"
  medium:
    description: Medium changes
    color: "a8c3f7"

groups:
  - name: owners
    description: Group of owners
    kind: developers
    spec: '["jane", "john"]'

rules:
  - name: is-small
    kind: patch
    description: Small pull request
    spec: $size() <= 30
  - name: is-medium
    kind: patch
    description: Medium-sized pull request
    spec: $size() > 30 && $size() <= 100
  - name: auto-merge-authored-by-owners
    kind: patch
    description: Auto merge pull requests authored by owners
    spec: '$isElementOf($author(), $group("owners"))'

workflows:
  - name: add-label-with-small-size
    description: Add label with small size
    if:
      - rule: is-small
    then:
      - '$addLabel("small")'
  - name: add-label-with-medium-size
    description: Add label with medium size
    if:
      - rule: is-medium
    then:
      - '$addLabel("medium")'
  - name: auto-merge-owner-pull-requests
    description: Auto merge pull requests
    if:
      - rule: auto-merge-authored-by-owners
    then:
      - '$merge("merge")'
